import streamlit as st
import pandas as pd

# ---------------------- é¡µé¢é…ç½® & æ·±è‰²ä¸»é¢˜ ----------------------
st.set_page_config(
    page_title="å—å®ç¾é£Ÿæ•°æ®ä»ªè¡¨ç›˜",
    layout="wide",
    initial_sidebar_state="collapsed"
)

# è‡ªå®šä¹‰æ·±è‰²èƒŒæ™¯æ ·å¼
st.markdown("""
    <style>
    .stApp {
        background-color: #1E1E1E;
        color: #FFFFFF;
    }
    .stHeader, .stToolbar {
        background-color: #1E1E1E !important;
    }
    .stDataFrame {
        color: #FFFFFF;
        background-color: #2D2D2D;
    }
    </style>
""", unsafe_allow_html=True)


# ---------------------- æ•°æ®å‡†å¤‡ ----------------------
# 1. 5å®¶å—å®ç¾é£Ÿåº—é“ºåŸºç¡€ä¿¡æ¯ï¼ˆå«ç»çº¬åº¦ï¼‰
shops = pd.DataFrame({
    "åº—é“ºåç§°": [
        "å¤è®°è€å‹ç²‰(ä¸­å±±è·¯åº—)", 
        "èˆ’è®°è€å‹ç²‰(ä¸ƒæ˜Ÿè·¯åº—)", 
        "çˆ±æ°‘èºè›³ç²‰(è¥¿å¤§åº—)", 
        "æ¡‚å°å¨(ä¸‡è±¡åŸåº—)", 
        "ç²‰ä¹‹éƒ½(æœé˜³åº—)"
    ],
    "åœ°å€": [
        "é’ç§€åŒºä¸­å±±è·¯22å·",
        "é’ç§€åŒºä¸ƒæ˜Ÿè·¯123å·",
        "è¥¿ä¹¡å¡˜åŒºå¤§å­¦ä¸œè·¯100å·",
        "é’ç§€åŒºæ°‘æ—å¤§é“136å·ä¸‡è±¡åŸ5æ¥¼",
        "å…´å®åŒºæœé˜³è·¯38å·"
    ],
    "çº¬åº¦": [22.8156, 22.8102, 22.8375, 22.8086, 22.8168],
    "ç»åº¦": [108.3307, 108.3245, 108.2841, 108.3515, 108.3228],
    "è¯„åˆ†": [4.7, 4.6, 4.5, 4.8, 4.4],
    "å¥½è¯„ç‡": ["95%", "93%", "90%", "96%", "88%"],
    "äººå‡æ¶ˆè´¹(å…ƒ)": [15, 14, 12, 60, 10]
})

# 2. 5å®¶é¤å…12ä¸ªæœˆä»·æ ¼èµ°åŠ¿æ•°æ®
months = list(range(1, 13))  # 1-12æœˆ
price_data = pd.DataFrame({
    "æœˆä»½": months * 5,  # é•¿åº¦60ï¼š12Ã—5
    "åº—é“ºåç§°": [
        "å¤è®°è€å‹ç²‰"]*12 + ["èˆ’è®°è€å‹ç²‰"]*12 + 
        ["çˆ±æ°‘èºè›³ç²‰"]*12 + ["æ¡‚å°å¨"]*12 + ["ç²‰ä¹‹éƒ½"]*12,  # é•¿åº¦60
    "äººå‡ä»·æ ¼(å…ƒ)": [
        # å¤è®°è€å‹ç²‰ï¼ˆ12ä¸ªæœˆï¼‰
        15,15,16,16,17,17,17,18,18,19,19,20,
        # èˆ’è®°è€å‹ç²‰ï¼ˆ12ä¸ªæœˆï¼‰
        14,14,15,15,16,16,16,17,17,18,18,19,
        # çˆ±æ°‘èºè›³ç²‰ï¼ˆ12ä¸ªæœˆï¼‰
        12,12,13,13,14,14,14,15,15,16,16,17,
        # æ¡‚å°å¨ï¼ˆ12ä¸ªæœˆï¼‰
        60,62,63,65,68,70,70,72,75,78,80,82,
        # ç²‰ä¹‹éƒ½ï¼ˆ12ä¸ªæœˆï¼‰
        10,10,11,11,12,12,12,13,13,14,14,15
    ]  # é•¿åº¦60
})
# è½¬æ¢ä¸ºæŠ˜çº¿å›¾éœ€è¦çš„å®½æ ¼å¼ï¼ˆæ¯åˆ—å¯¹åº”ä¸€å®¶åº—ï¼‰
price_wide = price_data.pivot(index="æœˆä»½", columns="åº—é“ºåç§°", values="äººå‡ä»·æ ¼(å…ƒ)")

# 3. ç”¨é¤é«˜å³°æ—¶æ®µæ•°æ®ï¼ˆé¢ç§¯å›¾ï¼‰
dining_data = pd.DataFrame({
    "æ—¶æ®µ(å°æ—¶)": list(range(0, 24)),
    "å¤è®°è€å‹ç²‰(ä¸­å±±è·¯åº—)": [5,8,10,12,15,20,30,45,60,55,40,35,45,50,65,70,60,50,40,30,20,15,10,8],
    "èˆ’è®°è€å‹ç²‰(ä¸ƒæ˜Ÿè·¯åº—)": [4,7,9,11,14,18,28,40,55,50,38,32,42,48,60,65,58,48,38,28,18,14,9,7],
    "çˆ±æ°‘èºè›³ç²‰(è¥¿å¤§åº—)": [3,6,8,10,13,17,25,35,50,45,35,30,40,45,55,60,55,45,35,25,17,13,8,6],
    "æ¡‚å°å¨(ä¸‡è±¡åŸåº—)": [2,3,5,8,12,20,35,50,70,80,90,85,95,100,110,105,95,80,60,40,25,15,10,5],
    "ç²‰ä¹‹éƒ½(æœé˜³åº—)": [6,9,12,15,18,22,30,40,50,45,38,32,42,48,55,60,55,45,35,25,18,14,10,7]
})


# ---------------------- ç•Œé¢ç»„ä»¶ ----------------------
st.title("å—å®ç¾é£Ÿæ•°æ®ä»ªè¡¨ç›˜")

# 1. åº—é“ºåˆ†å¸ƒåœ°å›¾
st.subheader("ğŸ“ å—å®ç¾é£Ÿåº—é“ºåˆ†å¸ƒ")
st.map(
    shops, 
    latitude="çº¬åº¦",  # æ˜¾å¼æŒ‡å®šçº¬åº¦åˆ—å
    longitude="ç»åº¦", # æ˜¾å¼æŒ‡å®šç»åº¦åˆ—å
    use_container_width=True
)

# 2. é¤å…è¯„åˆ†æŸ±çŠ¶å›¾
st.subheader("â­ é¤å…è¯„åˆ†")
st.bar_chart(shops.set_index("åº—é“ºåç§°")["è¯„åˆ†"], color="#4CAF50", use_container_width=True)

# 3. 12ä¸ªæœˆä»·æ ¼èµ°åŠ¿æŠ˜çº¿å›¾
st.subheader("ğŸ“Š 5å®¶é¤å…12ä¸ªæœˆä»·æ ¼èµ°åŠ¿")
st.line_chart(
    price_wide,
    color=["#FF6B6B", "#4ECDC4", "#45B7D1", "#FFA07A", "#98D8C8"],
    use_container_width=True
)

# 4. ç”¨é¤é«˜å³°æ—¶æ®µé¢ç§¯å›¾ï¼ˆæ ¸å¿ƒä¿®å¤ï¼šé¢œè‰²æ•°é‡åŒ¹é…åˆ—æ•°ï¼‰
st.subheader("â° ç”¨é¤é«˜å³°æ—¶æ®µ")
st.area_chart(
    dining_data.set_index("æ—¶æ®µ(å°æ—¶)"),
    # 5ä¸ªé¢œè‰²å¯¹åº”5åˆ—åº—é“ºï¼Œæ•°é‡å®Œå…¨åŒ¹é…
    color=["#FF6B6B", "#4ECDC4", "#45B7D1", "#FFA07A", "#98D8C8"],
    use_container_width=True
)

# 5. é¤å…è¯¦æƒ…
st.subheader("ğŸ“‹ é¤å…è¯¦æƒ…")
st.dataframe(shops[["åº—é“ºåç§°", "åœ°å€", "è¯„åˆ†", "å¥½è¯„ç‡", "äººå‡æ¶ˆè´¹(å…ƒ)"]], use_container_width=True)

# 6. ä»Šæ—¥åˆé¤æ¨è
st.subheader("ğŸ² ä»Šæ—¥åˆé¤æ¨è")
st.write("**å¤è®°è€å‹ç²‰(ä¸­å±±è·¯åº—)** - ç»å…¸è€å‹ç²‰ï¼ˆé…¸è¾£é²œé¦™ï¼Œåœ°é“å—å®å‘³ï¼‰")
st.image(
    "https://tse1-mm.cn.bing.net/th/id/OIP-C.2m02I_TdBlKVoZTxWmGMTAHaFm?w=252&h=191&c=7&r=0&o=5&cb=ucfimg2&pid=1.7&ucfimg=1",
    caption="å¤è®°è€å‹ç²‰",
    use_container_width=True
)


